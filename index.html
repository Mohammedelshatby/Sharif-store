<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø±ÙŠÙ Ø§Ù„Ø¬Ù†Ø¯ÙŠ - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ÙØªÙˆØ­Ø©</title>
    <style>
        body { background: white; color: black; font-family: sans-serif; text-align: center; padding: 10px; }
        .btn { 
            background: #2ecc71; color: white; padding: 20px; 
            border: none; border-radius: 10px; font-size: 20px; 
            font-weight: bold; width: 90%; margin: 10px; cursor: pointer;
        }
        .btn-red { background: #e74c3c; }
        .btn-blue { background: #3498db; }
        .panel { border: 2px solid #333; padding: 15px; margin-top: 20px; border-radius: 15px; background: #f9f9f9; }
        input, select { width: 85%; padding: 15px; margin: 10px; font-size: 18px; border: 1px solid #ccc; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background: #333; color: white; }
    </style>
</head>
<body>

    <h1>ğŸ“¦ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø±ÙŠÙ Ø§Ù„Ø¬Ù†Ø¯ÙŠ (Ù…ÙØªÙˆØ­)</h1>
    
    <button class="btn" onclick="document.getElementById('sec_item').style.display='block'">1. Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯</button>
    <button class="btn btn-blue" onclick="openMove('ÙˆØ§Ø±Ø¯')">2. ØªØ³Ø¬ÙŠÙ„ (ÙˆØ§Ø±Ø¯ / Ø¥Ø¶Ø§ÙØ©)</button>
    <button class="btn btn-blue" onclick="openMove('ØµØ±Ù')">3. ØªØ³Ø¬ÙŠÙ„ (ØµØ§Ø¯Ø± / ØµØ±Ù)</button>
    <button class="btn btn-red" onclick="showInv()">4. Ø¹Ø±Ø¶ Ø¬Ø±Ø¯ Ø§Ù„Ù…Ø®Ø²Ù†</button>
    <button class="btn" style="background:#7f8c8d" onclick="location.reload()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©</button>

    <div id="sec_item" class="panel" style="display:none">
        <h3>Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯</h3>
        <input type="text" id="it_n" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
        <input type="text" id="it_c" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØµÙ†Ù">
        <button class="btn" onclick="saveIt()">Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù</button>
    </div>

    <div id="sec_move" class="panel" style="display:none">
        <h3 id="move_h">Ø­Ø±ÙƒØ©</h3>
        <select id="mo_it"></select>
        <input type="number" id="mo_q" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
        <button class="btn btn-blue" onclick="saveMo()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø±ÙƒØ©</button>
    </div>

    <div id="sec_inv" class="panel" style="display:none">
        <h3>ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ø±Ø¯</h3>
        <div id="invTable"></div>
    </div>

    <script>
        // Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø³ÙŠØ·Ø© Ø¬Ø¯Ø§Ù‹
        var db = JSON.parse(localStorage.getItem('SHARIF_OPEN')) || { items:[], logs:[] };
        var activeT = "";

        function saveIt() {
            var n = document.getElementById('it_n').value;
            var c = document.getElementById('it_c').value;
            if(n && c) {
                db.items.push({n:n, c:c});
                sync(); alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù');
                document.getElementById('sec_item').style.display='none';
            }
        }

        function openMove(t) {
            activeT = t;
            document.getElementById('move_h').innerText = "ØªØ³Ø¬ÙŠÙ„ Ø¥Ø°Ù† " + t;
            document.getElementById('mo_it').innerHTML = db.items.map(i => <option value="${i.c}">${i.n}</option>).join('');
            document.getElementById('sec_move').style.display='block';
        }

        function saveMo() {
            var c = document.getElementById('mo_it').value;
            var q = document.getElementById('mo_q').value;
            if(c && q) {
                db.logs.push({t:activeT, c:c, q:parseFloat(q)});
                sync(); alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ ' + activeT);
                document.getElementById('sec_move').style.display='none';
            }
        }

        function showInv() {
            var h = '<table><tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„Ø±ØµÙŠØ¯</th></tr>';
            db.items.forEach(it => {
                var b = 0;
                db.logs.forEach(l => { if(l.c==it.c) b += (l.t=='ÙˆØ§Ø±Ø¯'? l.q : -l.q); });
                h += <tr><td>${it.n}</td><td>${b}</td></tr>;
            });
            document.getElementById('invTable').innerHTML = h + '</table>';
            document.getElementById('sec_inv').style.display='block';
        }

        function sync() { localStorage.setItem('SHARIF_OPEN', JSON.stringify(db)); }
    </script>

</body>
</html>
